{
  "hash": "5cbc28d1a9283b02799cb5388c3647af",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Global Handwashing Access and Child Health\"\nsubtitle: \"A UNICEF Data Analysis Report\"\nauthor: \"Swithaja Nagiri\"\ndate: today\nformat:\n  html:\n    theme: cosmo\n    toc: true\n    toc-depth: 3\n    toc-title: \"Contents\"\n    embed-resources: true\n    code-fold: true\n    code-tools: true\n    highlight-style: github\n    fig-width: 10\n    fig-height: 6\n---\n\n## Introduction\n\nThis report looks at the problem of not having enough access to handwashing facilities around the world and how it affects health. Using data from UNICEF, we analyze how many people in different countries and regions don’t have access to basic handwashing facilities. We also explore how access to handwashing is connected to life expectancy and economic factors.\n\nWashing hands with soap is one of the most affordable ways to improve public health, potentially cutting down diarrhea by up to 50% and respiratory infections by 25%. Even though it's so important, many people around the world still don’t have access to handwashing facilities, putting them at higher risk for preventable diseases.\n\n::: {#setup .cell message='false' execution_count=1}\n``` {.python .cell-code}\n# Import necessary libraries\nimport pandas as pd\nimport numpy as np\nimport plotnine as p9\nimport geopandas as gpd\nfrom plotnine import *\nimport statsmodels.api as sm\nimport geodatasets\nimport matplotlib.pyplot as plt\n```\n:::\n\n\n::: {#cell-load-data .cell message='false' execution_count=2}\n``` {.python .cell-code}\n# Data loading, the cleaned, filtered, sorted and merged data from indicators and metadata\nunicef_data = pd.read_csv(r\"C:\\Users\\Swithaja N\\Documents\\DCU\\2nd Sem\\Data Analytics\\Assignment 2\\unicef-report\\merged_unicef_data.csv.csv\")\n\n# First few rows of the dataset\nunicef_data.head()\n```\n\n::: {#load-data .cell-output .cell-output-display execution_count=9}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>country</th>\n      <th>year</th>\n      <th>limited_handwashing_percent</th>\n      <th>Population, total</th>\n      <th>GDP per capita (constant 2015 US$)</th>\n      <th>Life expectancy at birth, total (years)</th>\n      <th>Hospital beds (per 1,000 people)</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Afghanistan</td>\n      <td>2005</td>\n      <td>25.015464</td>\n      <td>24404567.0</td>\n      <td>363.640141</td>\n      <td>58.361</td>\n      <td>0.42</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Afghanistan</td>\n      <td>2006</td>\n      <td>24.989365</td>\n      <td>25424094.0</td>\n      <td>367.758312</td>\n      <td>58.684</td>\n      <td>0.42</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Afghanistan</td>\n      <td>2007</td>\n      <td>24.963012</td>\n      <td>25909852.0</td>\n      <td>410.757729</td>\n      <td>59.111</td>\n      <td>0.42</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Afghanistan</td>\n      <td>2008</td>\n      <td>24.936531</td>\n      <td>26482622.0</td>\n      <td>417.647283</td>\n      <td>59.852</td>\n      <td>0.42</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Afghanistan</td>\n      <td>2009</td>\n      <td>24.909920</td>\n      <td>27466101.0</td>\n      <td>488.830652</td>\n      <td>60.364</td>\n      <td>0.42</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Geographic Patterns of Handwashing Access\n\nThe map below shows the percentage of the population with limited access to handwashing facilities in different countries, highlighting geographic differences.\n\n::: {#6fc0ad03 .cell execution_count=3}\n``` {.python .cell-code}\n# Finding available Natural Earth datasets\ntry:\n    # Option 1: Use GeoPandas built-in naturalearth_lowres dataset\n    world = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\n    print(\"Columns in world GeoDataFrame:\", world.columns)  # Debug: Check column names\nexcept Exception as e:\n    print(f\"Error using GeoPandas dataset: {e}\")\n    try:\n        # Option 2: Direct download from Natural Earth\n        import requests\n        import tempfile\n        import zipfile\n        import os\n\n        url = \"https://naciscdn.org/naturalearth/110m/cultural/ne_110m_admin_0_countries.zip\"\n        response = requests.get(url)\n        response.raise_for_status()\n\n        with tempfile.TemporaryDirectory() as tmpdir:\n            zip_path = os.path.join(tmpdir, \"ne_countries.zip\")\n            with open(zip_path, 'wb') as f:\n                f.write(response.content)\n\n            with zipfile.ZipFile(zip_path, 'r') as zip_ref:\n                zip_ref.extractall(tmpdir)\n\n            shp_path = os.path.join(tmpdir, \"ne_110m_admin_0_countries.shp\")\n            world = gpd.read_file(shp_path)\n            print(\"Columns in downloaded world GeoDataFrame:\", world.columns)  # Debug\n    except Exception as e:\n        print(f\"Failed to download Natural Earth data: {e}\")\n        raise\n\n# Create recent_data from unicef_data (if not already created)\n# This assumes that the unicef_data dataset contains the columns 'country' and 'year'.\nrecent_data = unicef_data.sort_values('year').groupby('country').last().reset_index()\nprint(\"Columns in recent_data:\", recent_data.columns)  # Debug\n\n# Merge the data with the world map\n# Try using standard column names for country names in the Natural Earth dataset.\npossible_country_columns = ['name', 'NAME', 'NAME_LONG', 'admin', 'country', 'COUNTRY', 'ADMIN', 'SOVEREIGNT']\nmerge_successful = False\n\nfor col in possible_country_columns:\n    if col in world.columns:\n        try:\n            merged_data = world.merge(recent_data, left_on=col, right_on='country', how='left')\n            print(f\"Successfully merged on column: {col}\")\n            merge_successful = True\n            break\n        except Exception as e:\n            print(f\"Failed to merge on column {col}: {e}\")\n\nif not merge_successful:\n    # If no direct match found, try case-insensitive comparison\n    world_lower = world.copy()\n    for col in world.columns:\n        if col.isupper():\n            world_lower[col.lower()] = world[col].str.lower()\n    \n    recent_data['country_lower'] = recent_data['country'].str.lower()\n    \n    for col in world_lower.columns:\n        if col.endswith('_lower'):\n            try:\n                merged_data = world.merge(recent_data, left_on=col.replace('_lower', ''), \n                                         right_on='country', how='left')\n                print(f\"Successfully merged on modified column: {col}\")\n                merge_successful = True\n                break\n            except Exception as e:\n                print(f\"Failed to merge on modified column {col}: {e}\")\n\nif not merge_successful:\n    raise KeyError(\"Could not find a suitable column in the world data to merge with 'country' in recent_data\")\n\n# Create the map visualization\nfig, ax = plt.subplots(1, 1, figsize=(12, 8))\nmerged_data.plot(column='limited_handwashing_percent', ax=ax, legend=True,\n                cmap='OrRd', legend_kwds={'label': \"% Population with Limited Access\",\n                                         'orientation': \"horizontal\"},\n                missing_kwds={'color': 'lightgrey'})\nax.set_title(\"Global Distribution of Limited Handwashing Access\")\nax.set_axis_off()\nplt.tight_layout()\nplt.show()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nError using GeoPandas dataset: The geopandas.dataset has been deprecated and was removed in GeoPandas 1.0. You can get the original 'naturalearth_lowres' data from https://www.naturalearthdata.com/downloads/110m-cultural-vectors/.\nColumns in downloaded world GeoDataFrame: Index(['featurecla', 'scalerank', 'LABELRANK', 'SOVEREIGNT', 'SOV_A3',\n       'ADM0_DIF', 'LEVEL', 'TYPE', 'TLC', 'ADMIN',\n       ...\n       'FCLASS_TR', 'FCLASS_ID', 'FCLASS_PL', 'FCLASS_GR', 'FCLASS_IT',\n       'FCLASS_NL', 'FCLASS_SE', 'FCLASS_BD', 'FCLASS_UA', 'geometry'],\n      dtype='object', length=169)\nColumns in recent_data: Index(['country', 'year', 'limited_handwashing_percent', 'Population, total',\n       'GDP per capita (constant 2015 US$)',\n       'Life expectancy at birth, total (years)',\n       'Hospital beds (per 1,000 people)'],\n      dtype='object')\nSuccessfully merged on column: NAME\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](report_files/figure-html/cell-4-output-2.png){width=1142 height=747}\n:::\n:::\n\n\n## Regional Analysis of Handwashing Access\n\nTo see regional patterns, compare the average percentage of people with limited handwashing access in different world regions.\n\n::: {#cell-bar-chart .cell execution_count=4}\n``` {.python .cell-code}\n# Get most recent data for each country\nrecent_data = unicef_data.sort_values('year').groupby('country').last().reset_index()\n\n# Create a region column by grouping countries\n\nregions = {\n    'Africa': ['Afghanistan', 'Algeria', 'Angola', 'Benin', 'Burkina Faso', 'Burundi', \n               'Cameroon', 'Central African Republic', 'Chad', 'Zambia', 'Zimbabwe'],\n    'Asia': ['Armenia', 'Azerbaijan', 'Bahrain', 'Bangladesh', 'Bhutan', 'Cambodia', 'China'],\n    'Americas': ['Barbados', 'Belize', 'Bolivia, Plurinational State of'],\n    'Europe': ['Bosnia and Herzegovina']\n}\n\n# Create a region column\ndef assign_region(country):\n    for region, countries in regions.items():\n        if country in countries:\n            return region\n    return 'Other'\n\nrecent_data['region'] = recent_data['country'].apply(assign_region)\n\n# Group by region and calculate mean\nregion_data = recent_data.groupby('region')['limited_handwashing_percent'].mean().reset_index()\nregion_data = region_data.sort_values(by='limited_handwashing_percent', ascending=False)\n\n# Create the bar chart\n(ggplot(region_data, aes(x='region', y='limited_handwashing_percent', fill='region')) +\n geom_bar(stat='identity') +\n theme_minimal() +\n theme(axis_text_x=element_text(angle=45, hjust=1),\n       figure_size=(10, 6)) +\n labs(title=\"Average Percentage of Population with Limited Handwashing Access by Region\",\n      x=\"Region\",\n      y=\"% Population with Limited Access\") +\n guides(fill=False))\n```\n\n::: {.cell-output .cell-output-display}\n![Regional comparison of limited handwashing access](report_files/figure-html/bar-chart-output-1.png){#bar-chart width=1000 height=600}\n:::\n:::\n\n\n## Impact of Handwashing Access on Health Outcomes\n\n### Relationship Between Handwashing Access and Life Expectancy\n\nThis scatter plot shows the link between limited handwashing access and life expectancy, with a regression line showing the overall trend.\n\n::: {#cell-scatter-plot .cell execution_count=5}\n``` {.python .cell-code}\n# Use most recent data for each country\nscatter_data = recent_data.dropna(subset=['limited_handwashing_percent', 'Life expectancy at birth, total (years)'])\n\n# Create the scatter plot with regression line\n(ggplot(scatter_data, aes(x='limited_handwashing_percent', \n                           y='Life expectancy at birth, total (years)')) +\n geom_point(alpha=0.6) +\n geom_smooth(method='lm', color='blue') +\n theme_minimal() +\n labs(title=\"Relationship between Limited Handwashing Access and Life Expectancy\",\n      x=\"% Population with Limited Handwashing Access\",\n      y=\"Life Expectancy at Birth (years)\"))\n```\n\n::: {.cell-output .cell-output-display}\n![Correlation between limited handwashing access and life expectancy](report_files/figure-html/scatter-plot-output-1.png){#scatter-plot width=640 height=480}\n:::\n:::\n\n\n::: {#regression-stats .cell execution_count=6}\n``` {.python .cell-code code-fold=\"true\"}\n# Calculate regression statistics\nX = scatter_data['limited_handwashing_percent']\nX = sm.add_constant(X)\ny = scatter_data['Life expectancy at birth, total (years)']\nmodel = sm.OLS(y, X).fit()\nprint(model.summary())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                                       OLS Regression Results                                      \n===================================================================================================\nDep. Variable:     Life expectancy at birth, total (years)   R-squared:                       0.380\nModel:                                                 OLS   Adj. R-squared:                  0.375\nMethod:                                      Least Squares   F-statistic:                     65.07\nDate:                                     Sat, 26 Apr 2025   Prob (F-statistic):           1.19e-12\nTime:                                             22:01:54   Log-Likelihood:                -328.46\nNo. Observations:                                      108   AIC:                             660.9\nDf Residuals:                                          106   BIC:                             666.3\nDf Model:                                                1                                         \nCovariance Type:                                 nonrobust                                         \n===============================================================================================\n                                  coef    std err          t      P>|t|      [0.025      0.975]\n-----------------------------------------------------------------------------------------------\nconst                          72.6335      0.754     96.281      0.000      71.138      74.129\nlimited_handwashing_percent    -0.2010      0.025     -8.067      0.000      -0.250      -0.152\n==============================================================================\nOmnibus:                        7.753   Durbin-Watson:                   1.919\nProb(Omnibus):                  0.021   Jarque-Bera (JB):                7.736\nSkew:                          -0.653   Prob(JB):                       0.0209\nKurtosis:                       3.116   Cond. No.                         46.5\n==============================================================================\n\nNotes:\n[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n```\n:::\n:::\n\n\n## Temporal Trends in Handwashing Access\n\n### Changes in Handwashing Access Over Time\n\nThe following time series chart shows how limited handwashing access has changed over time in selected countries, helping us see progress or setbacks.\n\n::: {#cell-time-series .cell execution_count=7}\n``` {.python .cell-code}\n# Select few countries with complete time series data\ncountries_to_plot = ['Bangladesh', 'Afghanistan', 'Burkina Faso', 'Cambodia']\ntime_data = unicef_data[unicef_data['country'].isin(countries_to_plot)]\n\n# Create the time series plot\n(ggplot(time_data, aes(x='year', y='limited_handwashing_percent', color='country', group='country')) +\n geom_line(size=1.2) +\n geom_point(size=3) +\n theme_minimal() +\n scale_x_continuous(breaks=range(2000, 2023, 5)) +\n labs(title=\"Trends in Limited Handwashing Access Over Time\",\n      x=\"Year\",\n      y=\"% Population with Limited Access\") +\n theme(legend_title=element_blank()))\n```\n\n::: {.cell-output .cell-output-display}\n![Trends in limited handwashing access over time in selected countries](report_files/figure-html/time-series-output-1.png){#time-series width=640 height=480}\n:::\n:::\n\n\n## Conclusions\n\nBased on the analysis of UNICEF data on handwashing access, several key findings emerge:\n\n1. **Geographic Disparities**: The world map shows clear differences in access to handwashing facilities, with particularly low levels in Africa and parts of Asia.\n\n2. **Health Impact**: Found a strong link between limited handwashing access and lower life expectancy. Countries with more people lacking handwashing access tend to have shorter life expectancy, emphasizing the importance of basic hygiene for public health.\n\n3. **Progress Over Time**: Some countries have made great strides in improving handwashing access over the last 20 years, while others still face major challenges. Overall, there has been progress, though at varying speeds.\n\n4. **Economic Factors**: Limited access to handwashing is more common in countries with lower GDP per capita, indicating that economic challenges affect the availability of basic hygiene facilities.\n\n",
    "supporting": [
      "report_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}